<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Middleware | Helium</title><meta data-react-helmet="true" property="og:title" content="Middleware | Helium"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="## Enhancing the store

Middlewares are a [common way to enhance stores in Redux applications](https://www.codementor.io/vkarpov/beginner-s-guide-to-redux-middleware-du107uyud).
Up until this point, the actions we&#x27;ve created are fairly dumb—all they can really do is get and set data. What if we want our dispatched actions to do
more complex things like request data from the server?

Helium supports middlewares, which are simply functions that intercept actions upon being dispatched, and allow custom logic to be applied to them.
The way middlewares intercept actions is by providing a bridge in between `Store:Fire` or `Store:Dispatch` being called and the root reducer
receiving those actions that were dispatched.

Middlewares take the form of three nested functions:

```lua
local function Middleware(Store)
	return function(NextDispatch)
		return function(Action)
			...
		end
	end
end
```

The first function takes in the current store that the middleware is being used on. We can call normal store functions on this object such as `SetState`, `GetState`, `Fire`, and `Connect`.
The second nested function takes in `NextDispatch`. In a store with a single middleware applied, calling `NextDispatch(Action)` will forward the the action directly to the store&#x27;s reducer.

The third nested function is the actual function that decides what to do with actions when they are dispatched. To keep the actions moving through to the reducer without consuming it,
you can call `NextDispatch(Action)`.

```lua
local function RedundantMiddleware(Store)
	return function(NextDispatch)
		return function(Action)
			NextDispatch(Action)
		end
	end
end

-- Some code

Store:ApplyMiddleware(RedundantMiddleware)
```

In the above code, `RedundantMiddleware` is a middleware that listens to actions when `Store:Fire` is called, and immediately forwards them to the store&#x27;s reducer with no side effects.
Let&#x27;s look at the source code of `LoggerMiddleware`, one of the middlewares bundled with Helium:

```lua
local function LoggerMiddleware()
	return function(NextMiddleware)
		return function(Action)
			print(Action.Type)
			NextMiddleware(Action)
		end
	end
end

return LoggerMiddleware
```

This middleware is nearly equivalent to our `RedundantMiddleware`, with the one difference that the type of the action being dispatched is printed to the output console.
In effect, this will &quot;log&quot; every action that is dispatached in our store. This can be useful for debugging actions that are dispatched through our application:

```lua
local DEBUGGING_ENABLED = true
local Reducer, InitialState = ...

local Store = Helium.Store.new(Reducer, InitialState)

if DEBUGGING_ENABLED then
	Store:ApplyMiddleware(Helium.LoggerMiddleware)
end
```

Helium offers a few built-in middlewares:

* `Helium.InspectorMiddleware` - Prints out the whole action being dispatched.
* `Helium.LoggerMiddleware` - Prints out the action types of every action dispatched.
* `Helium.SpunkMiddleware` - Like `ThunkMiddleware`, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned immediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.
* `Helium.ThunkMiddleware` - Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered by the middleware in place of an action, that function will be intercepted and called with the arguments `MyThunk(Dispatch, GetState)`.

A usage example for `SpunkMiddleware` would be an action that needs to fetch data from the server:

_____

### Entry point:

```lua
local Store = Helium.Store.new(RootReducer, InitialState)
Store:ApplyMiddleware(Helium.SpunkMiddleware)
```

### Actions module:

```lua
local Actions = {}
function Actions.FetchCoins()
	return function(Dispatch, GetState)
		-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.
		local Coins = ReplicatedStorage.GetCoins:InvokeServer()
		Dispatch({
			Type = &quot;SetCoins&quot;;
			Value = Coins;
		})
	end
end

return Actions
```

### Some component in our application:

```lua
self.Janitor:Add(self.Gui.FetchCoinsButton.Activated:Connect(function()
	self.Store:Fire(Actions.FetchCoins())
end), &quot;Disconnect&quot;)
```

Your use case for middlewares may vary. You might not need it at all for your application; alternatively, you may find a need to write your own middlewares for debugging or managing state.
Middleware-facilitated operations such as thunks are generally the best place to put logic that affect state after yielding calls, such as when retrieving data from the server."><meta data-react-helmet="true" property="og:description" content="## Enhancing the store

Middlewares are a [common way to enhance stores in Redux applications](https://www.codementor.io/vkarpov/beginner-s-guide-to-redux-middleware-du107uyud).
Up until this point, the actions we&#x27;ve created are fairly dumb—all they can really do is get and set data. What if we want our dispatched actions to do
more complex things like request data from the server?

Helium supports middlewares, which are simply functions that intercept actions upon being dispatched, and allow custom logic to be applied to them.
The way middlewares intercept actions is by providing a bridge in between `Store:Fire` or `Store:Dispatch` being called and the root reducer
receiving those actions that were dispatched.

Middlewares take the form of three nested functions:

```lua
local function Middleware(Store)
	return function(NextDispatch)
		return function(Action)
			...
		end
	end
end
```

The first function takes in the current store that the middleware is being used on. We can call normal store functions on this object such as `SetState`, `GetState`, `Fire`, and `Connect`.
The second nested function takes in `NextDispatch`. In a store with a single middleware applied, calling `NextDispatch(Action)` will forward the the action directly to the store&#x27;s reducer.

The third nested function is the actual function that decides what to do with actions when they are dispatched. To keep the actions moving through to the reducer without consuming it,
you can call `NextDispatch(Action)`.

```lua
local function RedundantMiddleware(Store)
	return function(NextDispatch)
		return function(Action)
			NextDispatch(Action)
		end
	end
end

-- Some code

Store:ApplyMiddleware(RedundantMiddleware)
```

In the above code, `RedundantMiddleware` is a middleware that listens to actions when `Store:Fire` is called, and immediately forwards them to the store&#x27;s reducer with no side effects.
Let&#x27;s look at the source code of `LoggerMiddleware`, one of the middlewares bundled with Helium:

```lua
local function LoggerMiddleware()
	return function(NextMiddleware)
		return function(Action)
			print(Action.Type)
			NextMiddleware(Action)
		end
	end
end

return LoggerMiddleware
```

This middleware is nearly equivalent to our `RedundantMiddleware`, with the one difference that the type of the action being dispatched is printed to the output console.
In effect, this will &quot;log&quot; every action that is dispatached in our store. This can be useful for debugging actions that are dispatched through our application:

```lua
local DEBUGGING_ENABLED = true
local Reducer, InitialState = ...

local Store = Helium.Store.new(Reducer, InitialState)

if DEBUGGING_ENABLED then
	Store:ApplyMiddleware(Helium.LoggerMiddleware)
end
```

Helium offers a few built-in middlewares:

* `Helium.InspectorMiddleware` - Prints out the whole action being dispatched.
* `Helium.LoggerMiddleware` - Prints out the action types of every action dispatched.
* `Helium.SpunkMiddleware` - Like `ThunkMiddleware`, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned immediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.
* `Helium.ThunkMiddleware` - Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered by the middleware in place of an action, that function will be intercepted and called with the arguments `MyThunk(Dispatch, GetState)`.

A usage example for `SpunkMiddleware` would be an action that needs to fetch data from the server:

_____

### Entry point:

```lua
local Store = Helium.Store.new(RootReducer, InitialState)
Store:ApplyMiddleware(Helium.SpunkMiddleware)
```

### Actions module:

```lua
local Actions = {}
function Actions.FetchCoins()
	return function(Dispatch, GetState)
		-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.
		local Coins = ReplicatedStorage.GetCoins:InvokeServer()
		Dispatch({
			Type = &quot;SetCoins&quot;;
			Value = Coins;
		})
	end
end

return Actions
```

### Some component in our application:

```lua
self.Janitor:Add(self.Gui.FetchCoinsButton.Activated:Connect(function()
	self.Store:Fire(Actions.FetchCoins())
end), &quot;Disconnect&quot;)
```

Your use case for middlewares may vary. You might not need it at all for your application; alternatively, you may find a need to write your own middlewares for debugging or managing state.
Middleware-facilitated operations such as thunks are generally the best place to put logic that affect state after yielding calls, such as when retrieving data from the server."><meta data-react-helmet="true" property="og:url" content="https://howmanysmall.github.io/Helium/api/Middleware"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="canonical" href="https://howmanysmall.github.io/Helium/api/Middleware"><link data-react-helmet="true" rel="alternate" href="https://howmanysmall.github.io/Helium/api/Middleware" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://howmanysmall.github.io/Helium/api/Middleware" hreflang="x-default"><link rel="stylesheet" href="/Helium/assets/css/styles.3c0ff9e9.css">
<link rel="preload" href="/Helium/assets/js/runtime~main.1e0cb9ef.js" as="script">
<link rel="preload" href="/Helium/assets/js/main.e7d8205c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Helium/"><b class="navbar__title">Helium</b></a><a class="navbar__item navbar__link" href="/Helium/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Helium/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/mhtGUS8" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/howmanysmall/Helium" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Press S to Search..." aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docPageContainer_2Kz0"><div class="docPage_1bdk"><div class="docSidebarContainer_1ykS"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Helium/api/Helium">​Helium</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Helium/api/Component">​Component</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Helium/api/Store">​Store</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/Helium/api/BaseComponent">​Base​Component</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Helium/api/Middleware">​Middleware</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_28N5"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_3WPG"><div class="docItemContainer_3XDu"><article><div class="member_qHIL markdown"><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3ryM"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><header><h1 class="docTitle_1ddc" style="text-decoration:none"><span style="display:inline-block">Middleware</span></h1><div class="luaClassTags_2Zrs"></div><div>
<h2>Enhancing the store</h2>
<p>
  Middlewares are a <a href="https://www.codementor.io/vkarpov/beginner-s-guide-to-redux-middleware-du107uyud" target="_blank">common way to enhance stores in Redux applications</a>.
  Up until this point, the actions we've created are fairly dumb—all they can really do is get and set data. What if we want our dispatched actions to do
  more complex things like request data from the server?
</p>
<p>
  Helium supports middlewares, which are simply functions that intercept actions upon being dispatched, and allow custom logic to be applied to them.
  The way middlewares intercept actions is by providing a bridge in between <code>Store:Fire</code> or <code>Store:Dispatch</code> being called and the root reducer
  receiving those actions that were dispatched.
</p>
<p>Middlewares take the form of three nested functions:</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">Middleware</span><span class="token punctuation">(</span>Store<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>NextDispatch<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">)</span>
			<span class="token punctuation">...</span>
		<span class="token keyword">end</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
<p>
  The first function takes in the current store that the middleware is being used on. We can call normal store functions on this object such as <code>SetState</code>, <code>GetState</code>, <code>Fire</code>, and <code>Connect</code>.
  The second nested function takes in <code>NextDispatch</code>. In a store with a single middleware applied, calling <code>NextDispatch(Action)</code> will forward the the action directly to the store's reducer.
</p>
<p>
  The third nested function is the actual function that decides what to do with actions when they are dispatched. To keep the actions moving through to the reducer without consuming it,
  you can call <code>NextDispatch(Action)</code>.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">RedundantMiddleware</span><span class="token punctuation">(</span>Store<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>NextDispatch<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">)</span>
			<span class="token function">NextDispatch</span><span class="token punctuation">(</span>Action<span class="token punctuation">)</span>
		<span class="token keyword">end</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment">-- Some code</span>

Store<span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>RedundantMiddleware<span class="token punctuation">)</span>
</code></pre>
<p>
  In the above code, <code>RedundantMiddleware</code> is a middleware that listens to actions when <code>Store:Fire</code> is called, and immediately forwards them to the store's reducer with no side effects.
  Let's look at the source code of <code>LoggerMiddleware</code>, one of the middlewares bundled with Helium:
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">LoggerMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>NextMiddleware<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">)</span>
			<span class="token function">print</span><span class="token punctuation">(</span>Action<span class="token punctuation">.</span>Type<span class="token punctuation">)</span>
			<span class="token function">NextMiddleware</span><span class="token punctuation">(</span>Action<span class="token punctuation">)</span>
		<span class="token keyword">end</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">return</span> LoggerMiddleware
</code></pre>
<p>
  This middleware is nearly equivalent to our <code>RedundantMiddleware</code>, with the one difference that the type of the action being dispatched is printed to the output console.
  In effect, this will "log" every action that is dispatached in our store. This can be useful for debugging actions that are dispatched through our application:
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> DEBUGGING_ENABLED <span class="token operator">=</span> <span class="token keyword">true</span>
<span class="token keyword">local</span> Reducer<span class="token punctuation">,</span> InitialState <span class="token operator">=</span> <span class="token punctuation">...</span>

<span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>Reducer<span class="token punctuation">,</span> InitialState<span class="token punctuation">)</span>

<span class="token keyword">if</span> DEBUGGING_ENABLED <span class="token keyword">then</span>
	Store<span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>LoggerMiddleware<span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
<p>Helium offers a few built-in middlewares:</p>
<ul>
  <li><code>Helium.InspectorMiddleware</code> - Prints out the whole action being dispatched.</li>
  <li><code>Helium.LoggerMiddleware</code> - Prints out the action types of every action dispatched.</li>
  <li><code>Helium.SpunkMiddleware</code> - Like <code>ThunkMiddleware</code>, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned immediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.</li>
  <li><code>Helium.ThunkMiddleware</code> - Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered by the middleware in place of an action, that function will be intercepted and called with the arguments <code>MyThunk(Dispatch, GetState)</code>.</li>
</ul>
<p>A usage example for <code>SpunkMiddleware</code> would be an action that needs to fetch data from the server:</p>
<hr>
<h3>Entry point:</h3>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>RootReducer<span class="token punctuation">,</span> InitialState<span class="token punctuation">)</span>
Store<span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>SpunkMiddleware<span class="token punctuation">)</span>
</code></pre>
<h3>Actions module:</h3>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> Actions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> Actions<span class="token punctuation">.</span><span class="token function">FetchCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Dispatch<span class="token punctuation">,</span> GetState<span class="token punctuation">)</span>
		<span class="token comment">-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.</span>
		<span class="token keyword">local</span> Coins <span class="token operator">=</span> ReplicatedStorage<span class="token punctuation">.</span>GetCoins<span class="token punctuation">:</span><span class="token function">InvokeServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token function">Dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			Type <span class="token operator">=</span> <span class="token string">"SetCoins"</span><span class="token punctuation">;</span>
			Value <span class="token operator">=</span> Coins<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">return</span> Actions
</code></pre>
<h3>Some component in our application:</h3>
<pre class="language-lua"><code class="language-lua">self<span class="token punctuation">.</span>Janitor<span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>Gui<span class="token punctuation">.</span>FetchCoinsButton<span class="token punctuation">.</span>Activated<span class="token punctuation">:</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	self<span class="token punctuation">.</span>Store<span class="token punctuation">:</span><span class="token function">Fire</span><span class="token punctuation">(</span>Actions<span class="token punctuation">.</span><span class="token function">FetchCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Disconnect"</span><span class="token punctuation">)</span>
</code></pre>
<p>
  Your use case for middlewares may vary. You might not need it at all for your application; alternatively, you may find a need to write your own middlewares for debugging or managing state.
  Middleware-facilitated operations such as thunks are generally the best place to put logic that affect state after yielding calls, such as when retrieving data from the server.
</p>
</div></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="types"></a>Types<a class="hash-link" href="#types" title="Direct link to heading">#</a></h2><div class="divider_3z1R"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="MiddlewareHandler"></a><code style="text-decoration:none">MiddlewareHandler</code><a class="hash-link" href="#MiddlewareHandler" title="Direct link to heading">#</a></h3><div class="repositoryDetailsContainer_1UH0"><a class="sourceButton_2aE5" href="https://github.com/howmanysmall/Helium/blob/main/src/Middleware.lua#L131"><div class="sourceButtonText_monK">&lt;/&gt;</div></a></div><div class="memberString_P8-X"><code class="purple__nFc">type</code> <code>MiddlewareHandler = </code> <code class="green_3LnD">(</code><code>NextMiddleware: </code><code class="purple__nFc">(</code><code>Action: </code><code class="blue_2Afy">BaseAction</code><code class="purple__nFc">)</code><code class="purple__nFc"> → </code><code class="purple__nFc">(</code><code class="purple__nFc">)</code><code class="green_3LnD">)</code><code class="green_3LnD"> → </code><code class="green_3LnD">(</code><code>Action: </code><code class="blue_2Afy">BaseAction</code><code class="green_3LnD">)</code><code class="green_3LnD"> → </code><code class="green_3LnD">(</code><code class="green_3LnD">)</code></div><div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="functions"></a>Functions<a class="hash-link" href="#functions" title="Direct link to heading">#</a></h2><div class="divider_3z1R"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="InspectorMiddleware"></a><code style="text-decoration:none">InspectorMiddleware</code><a class="hash-link" href="#InspectorMiddleware" title="Direct link to heading">#</a></h3><span class="docTag_3qMS" style="border-color:#218c74;color:#218c74">Middleware</span><div class="repositoryDetailsContainer_1UH0"><a class="sourceButton_2aE5" href="https://github.com/howmanysmall/Helium/blob/main/src/Middleware.lua#L169"><div class="sourceButtonText_monK">&lt;/&gt;</div></a></div><div class="memberString_P8-X"><code>Middleware.</code><code class="green_3LnD">InspectorMiddleware</code><code>(</code><code>) → </code><code class="blue_2Afy">MiddlewareHandler</code><span class="inlineDescription_17uy">-- <span>
<p>The handler code for the middleware.</p>
</span></span></div><div>
<p>Prints out the whole action being dispatched.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> AwesomeAction <span class="token operator">=</span> Helium<span class="token punctuation">.</span><span class="token function">MakeActionCreator</span><span class="token punctuation">(</span><span class="token string">"AwesomeAction"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>ObjectName<span class="token punctuation">:</span> string<span class="token punctuation">,</span> IsAwesome<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		ObjectName <span class="token operator">=</span> ObjectName<span class="token punctuation">;</span>
		IsAwesome <span class="token operator">=</span> IsAwesome<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> SetState<span class="token punctuation">)</span>
	<span class="token keyword">if</span> Action<span class="token punctuation">.</span>Type <span class="token operator">==</span> AwesomeAction<span class="token punctuation">.</span>ActionName <span class="token keyword">then</span>
		<span class="token function">SetState</span><span class="token punctuation">(</span>Action<span class="token punctuation">.</span>ObjectName<span class="token punctuation">,</span> Action<span class="token punctuation">.</span>IsAwesome<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	LPlus <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
	LPlusLight <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
	Helium <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>InspectorMiddleware<span class="token punctuation">)</span>

Store<span class="token punctuation">:</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token function">AwesomeAction</span><span class="token punctuation">(</span><span class="token string">"LPlus"</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">--[[
	Prints:
		{
			Type = "AwesomeAction";
			ObjectName = "LPlus";
			IsAwesome = true;
		}
]]</span>
</code></pre>
</div><div class="divider_3z1R"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="LoggerMiddleware"></a><code style="text-decoration:none">LoggerMiddleware</code><a class="hash-link" href="#LoggerMiddleware" title="Direct link to heading">#</a></h3><span class="docTag_3qMS" style="border-color:#218c74;color:#218c74">Middleware</span><div class="repositoryDetailsContainer_1UH0"><a class="sourceButton_2aE5" href="https://github.com/howmanysmall/Helium/blob/main/src/Middleware.lua#L207"><div class="sourceButtonText_monK">&lt;/&gt;</div></a></div><div class="memberString_P8-X"><code>Middleware.</code><code class="green_3LnD">LoggerMiddleware</code><code>(</code><code>) → </code><code class="blue_2Afy">MiddlewareHandler</code><span class="inlineDescription_17uy">-- <span>
<p>The handler code for the middleware.</p>
</span></span></div><div>
<p>Prints out the action types of every action dispatched.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> AwesomeAction <span class="token operator">=</span> Helium<span class="token punctuation">.</span><span class="token function">MakeActionCreator</span><span class="token punctuation">(</span><span class="token string">"AwesomeAction"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>ObjectName<span class="token punctuation">:</span> string<span class="token punctuation">,</span> IsAwesome<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		ObjectName <span class="token operator">=</span> ObjectName<span class="token punctuation">;</span>
		IsAwesome <span class="token operator">=</span> IsAwesome<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> SetState<span class="token punctuation">)</span>
	<span class="token keyword">if</span> Action<span class="token punctuation">.</span>Type <span class="token operator">==</span> AwesomeAction<span class="token punctuation">.</span>ActionName <span class="token keyword">then</span>
		<span class="token function">SetState</span><span class="token punctuation">(</span>Action<span class="token punctuation">.</span>ObjectName<span class="token punctuation">,</span> Action<span class="token punctuation">.</span>IsAwesome<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	LPlus <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
	LPlusLight <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
	Helium <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>InspectorMiddleware<span class="token punctuation">)</span>

Store<span class="token punctuation">:</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token function">AwesomeAction</span><span class="token punctuation">(</span><span class="token string">"LPlus"</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Prints: "AwesomeAction"</span>
</code></pre>
</div><div class="divider_3z1R"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="SpunkMiddleware"></a><code style="text-decoration:none">SpunkMiddleware</code><a class="hash-link" href="#SpunkMiddleware" title="Direct link to heading">#</a></h3><span class="docTag_3qMS" style="border-color:#218c74;color:#218c74">Middleware</span><div class="repositoryDetailsContainer_1UH0"><a class="sourceButton_2aE5" href="https://github.com/howmanysmall/Helium/blob/main/src/Middleware.lua#L247"><div class="sourceButtonText_monK">&lt;/&gt;</div></a></div><div class="memberString_P8-X"><code>Middleware.</code><code class="green_3LnD">SpunkMiddleware</code><code>(</code><div class="inset_2cJr"><div><code>Store: </code><code class="blue_2Afy">Store</code><span class="inlineDescription_17uy">-- <span>
<p>The Store of the middleware.</p>
</span></span></div></div><code>) → </code><code class="blue_2Afy">MiddlewareHandler</code><span class="inlineDescription_17uy">-- <span>
<p>The handler code for the middleware.</p>
</span></span></div><div>
<p>
  Like <code>ThunkMiddleware</code>, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned
  immediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">FetchCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Dispatch<span class="token punctuation">,</span> GetState<span class="token punctuation">)</span>
		<span class="token comment">-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.</span>
		<span class="token keyword">local</span> Coins <span class="token operator">=</span> ReplicatedStorage<span class="token punctuation">.</span>GetCoins<span class="token punctuation">:</span><span class="token function">InvokeServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token function">Dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			Type <span class="token operator">=</span> <span class="token string">"SetCoins"</span><span class="token punctuation">;</span>
			Value <span class="token operator">=</span> Coins<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> SetState<span class="token punctuation">)</span>
	<span class="token keyword">if</span> Action<span class="token punctuation">.</span>Type <span class="token operator">==</span> <span class="token string">"SetCoins"</span> <span class="token keyword">then</span>
		<span class="token function">SetState</span><span class="token punctuation">(</span><span class="token string">"Coins"</span><span class="token punctuation">,</span> Action<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> InitialState<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>SpunkMiddleware<span class="token punctuation">)</span>

Store<span class="token punctuation">:</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token function">FetchCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_3z1R"></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ThunkMiddleware"></a><code style="text-decoration:none">ThunkMiddleware</code><a class="hash-link" href="#ThunkMiddleware" title="Direct link to heading">#</a></h3><span class="docTag_3qMS" style="border-color:#218c74;color:#218c74">Middleware</span><div class="repositoryDetailsContainer_1UH0"><a class="sourceButton_2aE5" href="https://github.com/howmanysmall/Helium/blob/main/src/Middleware.lua#L288"><div class="sourceButtonText_monK">&lt;/&gt;</div></a></div><div class="memberString_P8-X"><code>Middleware.</code><code class="green_3LnD">ThunkMiddleware</code><code>(</code><div class="inset_2cJr"><div><code>Store: </code><code class="blue_2Afy">Store</code><span class="inlineDescription_17uy">-- <span>
<p>The Store of the middleware.</p>
</span></span></div></div><code>) → </code><code class="blue_2Afy">MiddlewareHandler</code><span class="inlineDescription_17uy">-- <span>
<p>The handler code for the middleware.</p>
</span></span></div><div>
<p>
  Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered
  by the middleware in place of an action, that function will be intercepted and called with the arguments <code>MyThunk(Dispatch, GetState)</code>.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">AddCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Dispatch<span class="token punctuation">,</span> GetState<span class="token punctuation">)</span>
		<span class="token function">Dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			Type <span class="token operator">=</span> <span class="token string">"SetCoins"</span><span class="token punctuation">;</span>
			Value <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> Store <span class="token operator">=</span> Helium<span class="token punctuation">.</span>Store<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>Action<span class="token punctuation">,</span> _<span class="token punctuation">,</span> SetState<span class="token punctuation">)</span>
	<span class="token keyword">if</span> Action<span class="token punctuation">.</span>Type <span class="token operator">==</span> <span class="token string">"SetCoins"</span> <span class="token keyword">then</span>
		<span class="token function">SetState</span><span class="token punctuation">(</span><span class="token string">"Coins"</span><span class="token punctuation">,</span> Action<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span><span class="token punctuation">,</span> InitialState<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">ApplyMiddleware</span><span class="token punctuation">(</span>Helium<span class="token punctuation">.</span>ThunkMiddleware<span class="token punctuation">)</span>

Store<span class="token punctuation">:</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token function">AddCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;InspectorMiddleware&quot;,
            &quot;desc&quot;: &quot;Prints out the whole action being dispatched.\n\n```lua\nlocal AwesomeAction = Helium.MakeActionCreator(\&quot;AwesomeAction\&quot;, function(ObjectName: string, IsAwesome: boolean)\n\treturn {\n\t\tObjectName = ObjectName;\n\t\tIsAwesome = IsAwesome;\n\t}\nend)\n\nlocal Store = Helium.Store.new(function(Action, _, SetState)\n\tif Action.Type == AwesomeAction.ActionName then\n\t\tSetState(Action.ObjectName, Action.IsAwesome)\n\tend\nend, {\n\tLPlus = false;\n\tLPlusLight = false;\n\tHelium = false;\n}):ApplyMiddleware(Helium.InspectorMiddleware)\n\nStore:Fire(AwesomeAction(\&quot;LPlus\&quot;, true))\n--[[\n\tPrints:\n\t\t{\n\t\t\tType = \&quot;AwesomeAction\&quot;;\n\t\t\tObjectName = \&quot;LPlus\&quot;;\n\t\t\tIsAwesome = true;\n\t\t}\n]]\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The handler code for the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;MiddlewareHandler&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;Middleware&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 169,
                &quot;path&quot;: &quot;src/Middleware.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;LoggerMiddleware&quot;,
            &quot;desc&quot;: &quot;Prints out the action types of every action dispatched.\n\n```lua\nlocal AwesomeAction = Helium.MakeActionCreator(\&quot;AwesomeAction\&quot;, function(ObjectName: string, IsAwesome: boolean)\n\treturn {\n\t\tObjectName = ObjectName;\n\t\tIsAwesome = IsAwesome;\n\t}\nend)\n\nlocal Store = Helium.Store.new(function(Action, _, SetState)\n\tif Action.Type == AwesomeAction.ActionName then\n\t\tSetState(Action.ObjectName, Action.IsAwesome)\n\tend\nend, {\n\tLPlus = false;\n\tLPlusLight = false;\n\tHelium = false;\n}):ApplyMiddleware(Helium.InspectorMiddleware)\n\nStore:Fire(AwesomeAction(\&quot;LPlus\&quot;, true)) -- Prints: \&quot;AwesomeAction\&quot;\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The handler code for the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;MiddlewareHandler&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;Middleware&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 207,
                &quot;path&quot;: &quot;src/Middleware.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;SpunkMiddleware&quot;,
            &quot;desc&quot;: &quot;Like `ThunkMiddleware`, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned\nimmediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.\n\n```lua\nlocal function FetchCoins()\n\treturn function(Dispatch, GetState)\n\t\t-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.\n\t\tlocal Coins = ReplicatedStorage.GetCoins:InvokeServer()\n\t\tDispatch({\n\t\t\tType = \&quot;SetCoins\&quot;;\n\t\t\tValue = Coins;\n\t\t})\n\tend\nend\n\nlocal Store = Helium.Store.new(function(Action, _, SetState)\n\tif Action.Type == \&quot;SetCoins\&quot; then\n\t\tSetState(\&quot;Coins\&quot;, Action.Value)\n\tend\nend, InitialState):ApplyMiddleware(Helium.SpunkMiddleware)\n\nStore:Fire(FetchCoins())\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;Store&quot;,
                    &quot;desc&quot;: &quot;The Store of the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;Store&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The handler code for the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;MiddlewareHandler&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;Middleware&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 247,
                &quot;path&quot;: &quot;src/Middleware.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;ThunkMiddleware&quot;,
            &quot;desc&quot;: &quot;Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered\nby the middleware in place of an action, that function will be intercepted and called with the arguments `MyThunk(Dispatch, GetState)`.\n\n```lua\nlocal function AddCoins()\n\treturn function(Dispatch, GetState)\n\t\tDispatch({\n\t\t\tType = \&quot;SetCoins\&quot;;\n\t\t\tValue = math.random(100);\n\t\t})\n\tend\nend\n\nlocal Store = Helium.Store.new(function(Action, _, SetState)\n\tif Action.Type == \&quot;SetCoins\&quot; then\n\t\tSetState(\&quot;Coins\&quot;, Action.Value)\n\tend\nend, InitialState):ApplyMiddleware(Helium.ThunkMiddleware)\n\nStore:Fire(AddCoins())\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;Store&quot;,
                    &quot;desc&quot;: &quot;The Store of the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;Store&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The handler code for the middleware.&quot;,
                    &quot;lua_type&quot;: &quot;MiddlewareHandler&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;tags&quot;: [
                &quot;Middleware&quot;
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 288,
                &quot;path&quot;: &quot;src/Middleware.lua&quot;
            }
        }
    ],
    &quot;properties&quot;: [],
    &quot;types&quot;: [
        {
            &quot;name&quot;: &quot;MiddlewareHandler&quot;,
            &quot;desc&quot;: &quot;&quot;,
            &quot;lua_type&quot;: &quot;(NextMiddleware: (Action: BaseAction) -&gt; ()) -&gt; (Action: BaseAction) -&gt; ()&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 131,
                &quot;path&quot;: &quot;src/Middleware.lua&quot;
            }
        }
    ],
    &quot;name&quot;: &quot;Middleware&quot;,
    &quot;desc&quot;: &quot;## Enhancing the store\n\nMiddlewares are a [common way to enhance stores in Redux applications](https://www.codementor.io/vkarpov/beginner-s-guide-to-redux-middleware-du107uyud).\nUp until this point, the actions we&#x27;ve created are fairly dumb—all they can really do is get and set data. What if we want our dispatched actions to do\nmore complex things like request data from the server?\n\nHelium supports middlewares, which are simply functions that intercept actions upon being dispatched, and allow custom logic to be applied to them.\nThe way middlewares intercept actions is by providing a bridge in between `Store:Fire` or `Store:Dispatch` being called and the root reducer\nreceiving those actions that were dispatched.\n\nMiddlewares take the form of three nested functions:\n\n```lua\nlocal function Middleware(Store)\n\treturn function(NextDispatch)\n\t\treturn function(Action)\n\t\t\t...\n\t\tend\n\tend\nend\n```\n\nThe first function takes in the current store that the middleware is being used on. We can call normal store functions on this object such as `SetState`, `GetState`, `Fire`, and `Connect`.\nThe second nested function takes in `NextDispatch`. In a store with a single middleware applied, calling `NextDispatch(Action)` will forward the the action directly to the store&#x27;s reducer.\n\nThe third nested function is the actual function that decides what to do with actions when they are dispatched. To keep the actions moving through to the reducer without consuming it,\nyou can call `NextDispatch(Action)`.\n\n```lua\nlocal function RedundantMiddleware(Store)\n\treturn function(NextDispatch)\n\t\treturn function(Action)\n\t\t\tNextDispatch(Action)\n\t\tend\n\tend\nend\n\n-- Some code\n\nStore:ApplyMiddleware(RedundantMiddleware)\n```\n\nIn the above code, `RedundantMiddleware` is a middleware that listens to actions when `Store:Fire` is called, and immediately forwards them to the store&#x27;s reducer with no side effects.\nLet&#x27;s look at the source code of `LoggerMiddleware`, one of the middlewares bundled with Helium:\n\n```lua\nlocal function LoggerMiddleware()\n\treturn function(NextMiddleware)\n\t\treturn function(Action)\n\t\t\tprint(Action.Type)\n\t\t\tNextMiddleware(Action)\n\t\tend\n\tend\nend\n\nreturn LoggerMiddleware\n```\n\nThis middleware is nearly equivalent to our `RedundantMiddleware`, with the one difference that the type of the action being dispatched is printed to the output console.\nIn effect, this will \&quot;log\&quot; every action that is dispatached in our store. This can be useful for debugging actions that are dispatched through our application:\n\n```lua\nlocal DEBUGGING_ENABLED = true\nlocal Reducer, InitialState = ...\n\nlocal Store = Helium.Store.new(Reducer, InitialState)\n\nif DEBUGGING_ENABLED then\n\tStore:ApplyMiddleware(Helium.LoggerMiddleware)\nend\n```\n\nHelium offers a few built-in middlewares:\n\n* `Helium.InspectorMiddleware` - Prints out the whole action being dispatched.\n* `Helium.LoggerMiddleware` - Prints out the action types of every action dispatched.\n* `Helium.SpunkMiddleware` - Like `ThunkMiddleware`, allows functions to be dispatched. The only difference is that the functions being dispatched will be spawned immediately in a separate thread. This could be more ideal for Roblox development as opposed to JavaScript do to the lack of Promise objects.\n* `Helium.ThunkMiddleware` - Like its Redux counterpart, thunk middleware allows functions to be dispatched as regular actions. When a function is encountered by the middleware in place of an action, that function will be intercepted and called with the arguments `MyThunk(Dispatch, GetState)`.\n\nA usage example for `SpunkMiddleware` would be an action that needs to fetch data from the server:\n\n_____\n\n### Entry point:\n\n```lua\nlocal Store = Helium.Store.new(RootReducer, InitialState)\nStore:ApplyMiddleware(Helium.SpunkMiddleware)\n```\n\n### Actions module:\n\n```lua\nlocal Actions = {}\nfunction Actions.FetchCoins()\n\treturn function(Dispatch, GetState)\n\t\t-- Where we would normally return an action here, we instead return a spawned thunk that defers our change in state.\n\t\tlocal Coins = ReplicatedStorage.GetCoins:InvokeServer()\n\t\tDispatch({\n\t\t\tType = \&quot;SetCoins\&quot;;\n\t\t\tValue = Coins;\n\t\t})\n\tend\nend\n\nreturn Actions\n```\n\n### Some component in our application:\n\n```lua\nself.Janitor:Add(self.Gui.FetchCoinsButton.Activated:Connect(function()\n\tself.Store:Fire(Actions.FetchCoins())\nend), \&quot;Disconnect\&quot;)\n```\n\nYour use case for middlewares may vary. You might not need it at all for your application; alternatively, you may find a need to write your own middlewares for debugging or managing state.\nMiddleware-facilitated operations such as thunks are generally the best place to put logic that affect state after yielding calls, such as when retrieving data from the server.&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 125,
        &quot;path&quot;: &quot;src/Middleware.lua&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types" class="table-of-contents__link">Types</a><ul><li><a href="#MiddlewareHandler" class="table-of-contents__link">MiddlewareHandler</a></li></ul></li><li><a href="#properties" class="table-of-contents__link">Properties</a></li><li><a href="#functions" class="table-of-contents__link">Functions</a><ul><li><a href="#InspectorMiddleware" class="table-of-contents__link">.InspectorMiddleware</a></li><li><a href="#LoggerMiddleware" class="table-of-contents__link">.LoggerMiddleware</a></li><li><a href="#SpunkMiddleware" class="table-of-contents__link">.SpunkMiddleware</a></li><li><a href="#ThunkMiddleware" class="table-of-contents__link">.ThunkMiddleware</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 howmanysmall. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
<script src="/Helium/assets/js/runtime~main.1e0cb9ef.js"></script>
<script src="/Helium/assets/js/main.e7d8205c.js"></script>
</body>
</html>